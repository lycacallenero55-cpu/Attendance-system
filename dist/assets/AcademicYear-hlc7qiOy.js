import{c as ye,n as Xe,r as s,E as Vt,v as qe,F as We,j as e,w as Ht,A as Xt,q as he,y as qt,x as ne,p as w,P as q,G as Wt,z as Zt,D as Jt,C as Qt,B as er,t as Ze,m as tr,o as Ae,k as K,f as rr,s as D}from"./index-Dm7atRpY.js";import{h as nr,u as ar,R as or,F as sr,B as P}from"./index-BlhDO3pI.js";import{C as cr,a as ir,b as dr,d as lr,c as ur}from"./card-B5UIdz6X.js";import{T as mr,a as pr,b as Te,c as J,d as fr,e as Q}from"./table-C8d3PbJy.js";import{B as le}from"./badge-BaVj31nL.js";import{I as G}from"./input-C-A1T-iP.js";import{L as Y}from"./label-CaWY0KgR.js";import{f as hr,L as xr,C as ue,D as ke,b as Oe,c as Fe,d as Le,e as Ge,g as Ye}from"./Layout-B3tkA0W2.js";import{C as vr,e as gr,S as wr,a as _r,b as jr,c as Cr,d as me}from"./select-D5rxK3kY.js";import{u as Mr}from"./index-o3oZkxKP.js";import{c as Je,I as yr,R as Nr}from"./index-DGTPau_T.js";import{P as je,T as Ke}from"./trash-2-BOOJ4Yrf.js";import{S as Sr}from"./search-BhyMOFM_.js";import{C as Ue}from"./calendar-days-CxZTRsfN.js";import{f as br}from"./format-CR8w9UPR.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=ye("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=ye("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=ye("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var Ce=["Enter"," "],Er=["ArrowDown","PageUp","Home"],Qe=["ArrowUp","PageDown","End"],Rr=[...Er,...Qe],Ir={ltr:[...Ce,"ArrowRight"],rtl:[...Ce,"ArrowLeft"]},Pr={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ae="Menu",[te,Ar,Tr]=Vt(ae),[z,et]=Xe(ae,[Tr,qe,Je]),xe=qe(),tt=Je(),[kr,V]=z(ae),[Or,oe]=z(ae),rt=t=>{const{__scopeMenu:n,open:r=!1,children:a,dir:c,onOpenChange:i,modal:f=!0}=t,m=xe(n),[x,v]=s.useState(null),p=s.useRef(!1),l=We(i),h=Mr(c);return s.useEffect(()=>{const j=()=>{p.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>p.current=!1;return document.addEventListener("keydown",j,{capture:!0}),()=>{document.removeEventListener("keydown",j,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),e.jsx(Ht,{...m,children:e.jsx(kr,{scope:n,open:r,onOpenChange:l,content:x,onContentChange:v,children:e.jsx(Or,{scope:n,onClose:s.useCallback(()=>l(!1),[l]),isUsingKeyboardRef:p,dir:h,modal:f,children:a})})})};rt.displayName=ae;var Fr="MenuAnchor",Ne=s.forwardRef((t,n)=>{const{__scopeMenu:r,...a}=t,c=xe(r);return e.jsx(Xt,{...c,...a,ref:n})});Ne.displayName=Fr;var Se="MenuPortal",[Lr,nt]=z(Se,{forceMount:void 0}),at=t=>{const{__scopeMenu:n,forceMount:r,children:a,container:c}=t,i=V(Se,n);return e.jsx(Lr,{scope:n,forceMount:r,children:e.jsx(he,{present:r||i.open,children:e.jsx(qt,{asChild:!0,container:c,children:a})})})};at.displayName=Se;var E="MenuContent",[Gr,be]=z(E),ot=s.forwardRef((t,n)=>{const r=nt(E,t.__scopeMenu),{forceMount:a=r.forceMount,...c}=t,i=V(E,t.__scopeMenu),f=oe(E,t.__scopeMenu);return e.jsx(te.Provider,{scope:t.__scopeMenu,children:e.jsx(he,{present:a||i.open,children:e.jsx(te.Slot,{scope:t.__scopeMenu,children:f.modal?e.jsx(Yr,{...c,ref:n}):e.jsx(Kr,{...c,ref:n})})})})}),Yr=s.forwardRef((t,n)=>{const r=V(E,t.__scopeMenu),a=s.useRef(null),c=ne(n,a);return s.useEffect(()=>{const i=a.current;if(i)return nr(i)},[]),e.jsx(De,{...t,ref:c,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:w(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),Kr=s.forwardRef((t,n)=>{const r=V(E,t.__scopeMenu);return e.jsx(De,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Ur=Zt("MenuContent.ScrollLock"),De=s.forwardRef((t,n)=>{const{__scopeMenu:r,loop:a=!1,trapFocus:c,onOpenAutoFocus:i,onCloseAutoFocus:f,disableOutsidePointerEvents:m,onEntryFocus:x,onEscapeKeyDown:v,onPointerDownOutside:p,onFocusOutside:l,onInteractOutside:h,onDismiss:j,disableOutsideScroll:g,...S}=t,A=V(E,r),L=oe(E,r),se=xe(r),U=tt(r),ce=Ar(r),[C,R]=s.useState(null),_=s.useRef(null),T=ne(n,_,A.onContentChange),b=s.useRef(0),H=s.useRef(""),we=s.useRef(0),W=s.useRef(null),ie=s.useRef("right"),Z=s.useRef(0),_e=g?or:s.Fragment,de=g?{as:Ur,allowPinchZoom:!0}:void 0,X=u=>{const O=H.current+u,o=ce().filter(N=>!N.disabled),d=document.activeElement,y=o.find(N=>N.ref.current===d)?.textValue,F=o.map(N=>N.textValue),$=en(F,O,y),I=o.find(N=>N.textValue===$)?.ref.current;(function N(Pe){H.current=Pe,window.clearTimeout(b.current),Pe!==""&&(b.current=window.setTimeout(()=>N(""),1e3))})(O),I&&setTimeout(()=>I.focus())};s.useEffect(()=>()=>window.clearTimeout(b.current),[]),ar();const k=s.useCallback(u=>ie.current===W.current?.side&&rn(u,W.current?.area),[]);return e.jsx(Gr,{scope:r,searchRef:H,onItemEnter:s.useCallback(u=>{k(u)&&u.preventDefault()},[k]),onItemLeave:s.useCallback(u=>{k(u)||(_.current?.focus(),R(null))},[k]),onTriggerLeave:s.useCallback(u=>{k(u)&&u.preventDefault()},[k]),pointerGraceTimerRef:we,onPointerGraceIntentChange:s.useCallback(u=>{W.current=u},[]),children:e.jsx(_e,{...de,children:e.jsx(sr,{asChild:!0,trapped:c,onMountAutoFocus:w(i,u=>{u.preventDefault(),_.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:f,children:e.jsx(Jt,{asChild:!0,disableOutsidePointerEvents:m,onEscapeKeyDown:v,onPointerDownOutside:p,onFocusOutside:l,onInteractOutside:h,onDismiss:j,children:e.jsx(Nr,{asChild:!0,...U,dir:L.dir,orientation:"vertical",loop:a,currentTabStopId:C,onCurrentTabStopIdChange:R,onEntryFocus:w(x,u=>{L.isUsingKeyboardRef.current||u.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Qt,{role:"menu","aria-orientation":"vertical","data-state":jt(A.open),"data-radix-menu-content":"",dir:L.dir,...se,...S,ref:T,style:{outline:"none",...S.style},onKeyDown:w(S.onKeyDown,u=>{const o=u.target.closest("[data-radix-menu-content]")===u.currentTarget,d=u.ctrlKey||u.altKey||u.metaKey,y=u.key.length===1;o&&(u.key==="Tab"&&u.preventDefault(),!d&&y&&X(u.key));const F=_.current;if(u.target!==F||!Rr.includes(u.key))return;u.preventDefault();const I=ce().filter(N=>!N.disabled).map(N=>N.ref.current);Qe.includes(u.key)&&I.reverse(),Jr(I)}),onBlur:w(t.onBlur,u=>{u.currentTarget.contains(u.target)||(window.clearTimeout(b.current),H.current="")}),onPointerMove:w(t.onPointerMove,re(u=>{const O=u.target,o=Z.current!==u.clientX;if(u.currentTarget.contains(O)&&o){const d=u.clientX>Z.current?"right":"left";ie.current=d,Z.current=u.clientX}}))})})})})})})});ot.displayName=E;var $r="MenuGroup",Ee=s.forwardRef((t,n)=>{const{__scopeMenu:r,...a}=t;return e.jsx(q.div,{role:"group",...a,ref:n})});Ee.displayName=$r;var Br="MenuLabel",st=s.forwardRef((t,n)=>{const{__scopeMenu:r,...a}=t;return e.jsx(q.div,{...a,ref:n})});st.displayName=Br;var pe="MenuItem",ze="menu.itemSelect",ve=s.forwardRef((t,n)=>{const{disabled:r=!1,onSelect:a,...c}=t,i=s.useRef(null),f=oe(pe,t.__scopeMenu),m=be(pe,t.__scopeMenu),x=ne(n,i),v=s.useRef(!1),p=()=>{const l=i.current;if(!r&&l){const h=new CustomEvent(ze,{bubbles:!0,cancelable:!0});l.addEventListener(ze,j=>a?.(j),{once:!0}),Wt(l,h),h.defaultPrevented?v.current=!1:f.onClose()}};return e.jsx(ct,{...c,ref:x,disabled:r,onClick:w(t.onClick,p),onPointerDown:l=>{t.onPointerDown?.(l),v.current=!0},onPointerUp:w(t.onPointerUp,l=>{v.current||l.currentTarget?.click()}),onKeyDown:w(t.onKeyDown,l=>{const h=m.searchRef.current!=="";r||h&&l.key===" "||Ce.includes(l.key)&&(l.currentTarget.click(),l.preventDefault())})})});ve.displayName=pe;var ct=s.forwardRef((t,n)=>{const{__scopeMenu:r,disabled:a=!1,textValue:c,...i}=t,f=be(pe,r),m=tt(r),x=s.useRef(null),v=ne(n,x),[p,l]=s.useState(!1),[h,j]=s.useState("");return s.useEffect(()=>{const g=x.current;g&&j((g.textContent??"").trim())},[i.children]),e.jsx(te.ItemSlot,{scope:r,disabled:a,textValue:c??h,children:e.jsx(yr,{asChild:!0,...m,focusable:!a,children:e.jsx(q.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...i,ref:v,onPointerMove:w(t.onPointerMove,re(g=>{a?f.onItemLeave(g):(f.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:w(t.onPointerLeave,re(g=>f.onItemLeave(g))),onFocus:w(t.onFocus,()=>l(!0)),onBlur:w(t.onBlur,()=>l(!1))})})})}),zr="MenuCheckboxItem",it=s.forwardRef((t,n)=>{const{checked:r=!1,onCheckedChange:a,...c}=t;return e.jsx(pt,{scope:t.__scopeMenu,checked:r,children:e.jsx(ve,{role:"menuitemcheckbox","aria-checked":fe(r)?"mixed":r,...c,ref:n,"data-state":Ie(r),onSelect:w(c.onSelect,()=>a?.(fe(r)?!0:!r),{checkForDefaultPrevented:!1})})})});it.displayName=zr;var dt="MenuRadioGroup",[Vr,Hr]=z(dt,{value:void 0,onValueChange:()=>{}}),lt=s.forwardRef((t,n)=>{const{value:r,onValueChange:a,...c}=t,i=We(a);return e.jsx(Vr,{scope:t.__scopeMenu,value:r,onValueChange:i,children:e.jsx(Ee,{...c,ref:n})})});lt.displayName=dt;var ut="MenuRadioItem",mt=s.forwardRef((t,n)=>{const{value:r,...a}=t,c=Hr(ut,t.__scopeMenu),i=r===c.value;return e.jsx(pt,{scope:t.__scopeMenu,checked:i,children:e.jsx(ve,{role:"menuitemradio","aria-checked":i,...a,ref:n,"data-state":Ie(i),onSelect:w(a.onSelect,()=>c.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});mt.displayName=ut;var Re="MenuItemIndicator",[pt,Xr]=z(Re,{checked:!1}),ft=s.forwardRef((t,n)=>{const{__scopeMenu:r,forceMount:a,...c}=t,i=Xr(Re,r);return e.jsx(he,{present:a||fe(i.checked)||i.checked===!0,children:e.jsx(q.span,{...c,ref:n,"data-state":Ie(i.checked)})})});ft.displayName=Re;var qr="MenuSeparator",ht=s.forwardRef((t,n)=>{const{__scopeMenu:r,...a}=t;return e.jsx(q.div,{role:"separator","aria-orientation":"horizontal",...a,ref:n})});ht.displayName=qr;var Wr="MenuArrow",xt=s.forwardRef((t,n)=>{const{__scopeMenu:r,...a}=t,c=xe(r);return e.jsx(er,{...c,...a,ref:n})});xt.displayName=Wr;var Zr="MenuSub",[sa,vt]=z(Zr),ee="MenuSubTrigger",gt=s.forwardRef((t,n)=>{const r=V(ee,t.__scopeMenu),a=oe(ee,t.__scopeMenu),c=vt(ee,t.__scopeMenu),i=be(ee,t.__scopeMenu),f=s.useRef(null),{pointerGraceTimerRef:m,onPointerGraceIntentChange:x}=i,v={__scopeMenu:t.__scopeMenu},p=s.useCallback(()=>{f.current&&window.clearTimeout(f.current),f.current=null},[]);return s.useEffect(()=>p,[p]),s.useEffect(()=>{const l=m.current;return()=>{window.clearTimeout(l),x(null)}},[m,x]),e.jsx(Ne,{asChild:!0,...v,children:e.jsx(ct,{id:c.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":c.contentId,"data-state":jt(r.open),...t,ref:Ze(n,c.onTriggerChange),onClick:l=>{t.onClick?.(l),!(t.disabled||l.defaultPrevented)&&(l.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:w(t.onPointerMove,re(l=>{i.onItemEnter(l),!l.defaultPrevented&&!t.disabled&&!r.open&&!f.current&&(i.onPointerGraceIntentChange(null),f.current=window.setTimeout(()=>{r.onOpenChange(!0),p()},100))})),onPointerLeave:w(t.onPointerLeave,re(l=>{p();const h=r.content?.getBoundingClientRect();if(h){const j=r.content?.dataset.side,g=j==="right",S=g?-5:5,A=h[g?"left":"right"],L=h[g?"right":"left"];i.onPointerGraceIntentChange({area:[{x:l.clientX+S,y:l.clientY},{x:A,y:h.top},{x:L,y:h.top},{x:L,y:h.bottom},{x:A,y:h.bottom}],side:j}),window.clearTimeout(m.current),m.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(l),l.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:w(t.onKeyDown,l=>{const h=i.searchRef.current!=="";t.disabled||h&&l.key===" "||Ir[a.dir].includes(l.key)&&(r.onOpenChange(!0),r.content?.focus(),l.preventDefault())})})})});gt.displayName=ee;var wt="MenuSubContent",_t=s.forwardRef((t,n)=>{const r=nt(E,t.__scopeMenu),{forceMount:a=r.forceMount,...c}=t,i=V(E,t.__scopeMenu),f=oe(E,t.__scopeMenu),m=vt(wt,t.__scopeMenu),x=s.useRef(null),v=ne(n,x);return e.jsx(te.Provider,{scope:t.__scopeMenu,children:e.jsx(he,{present:a||i.open,children:e.jsx(te.Slot,{scope:t.__scopeMenu,children:e.jsx(De,{id:m.contentId,"aria-labelledby":m.triggerId,...c,ref:v,align:"start",side:f.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{f.isUsingKeyboardRef.current&&x.current?.focus(),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:w(t.onFocusOutside,p=>{p.target!==m.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:w(t.onEscapeKeyDown,p=>{f.onClose(),p.preventDefault()}),onKeyDown:w(t.onKeyDown,p=>{const l=p.currentTarget.contains(p.target),h=Pr[f.dir].includes(p.key);l&&h&&(i.onOpenChange(!1),m.trigger?.focus(),p.preventDefault())})})})})})});_t.displayName=wt;function jt(t){return t?"open":"closed"}function fe(t){return t==="indeterminate"}function Ie(t){return fe(t)?"indeterminate":t?"checked":"unchecked"}function Jr(t){const n=document.activeElement;for(const r of t)if(r===n||(r.focus(),document.activeElement!==n))return}function Qr(t,n){return t.map((r,a)=>t[(n+a)%t.length])}function en(t,n,r){const c=n.length>1&&Array.from(n).every(v=>v===n[0])?n[0]:n,i=r?t.indexOf(r):-1;let f=Qr(t,Math.max(i,0));c.length===1&&(f=f.filter(v=>v!==r));const x=f.find(v=>v.toLowerCase().startsWith(c.toLowerCase()));return x!==r?x:void 0}function tn(t,n){const{x:r,y:a}=t;let c=!1;for(let i=0,f=n.length-1;i<n.length;f=i++){const m=n[i],x=n[f],v=m.x,p=m.y,l=x.x,h=x.y;p>a!=h>a&&r<(l-v)*(a-p)/(h-p)+v&&(c=!c)}return c}function rn(t,n){if(!n)return!1;const r={x:t.clientX,y:t.clientY};return tn(r,n)}function re(t){return n=>n.pointerType==="mouse"?t(n):void 0}var nn=rt,an=Ne,on=at,sn=ot,cn=Ee,dn=st,ln=ve,un=it,mn=lt,pn=mt,fn=ft,hn=ht,xn=xt,vn=gt,gn=_t,ge="DropdownMenu",[wn,ca]=Xe(ge,[et]),M=et(),[_n,Ct]=wn(ge),Mt=t=>{const{__scopeDropdownMenu:n,children:r,dir:a,open:c,defaultOpen:i,onOpenChange:f,modal:m=!0}=t,x=M(n),v=s.useRef(null),[p,l]=tr({prop:c,defaultProp:i??!1,onChange:f,caller:ge});return e.jsx(_n,{scope:n,triggerId:Ae(),triggerRef:v,contentId:Ae(),open:p,onOpenChange:l,onOpenToggle:s.useCallback(()=>l(h=>!h),[l]),modal:m,children:e.jsx(nn,{...x,open:p,onOpenChange:l,dir:a,modal:m,children:r})})};Mt.displayName=ge;var yt="DropdownMenuTrigger",Nt=s.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,disabled:a=!1,...c}=t,i=Ct(yt,r),f=M(r);return e.jsx(an,{asChild:!0,...f,children:e.jsx(q.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...c,ref:Ze(n,i.triggerRef),onPointerDown:w(t.onPointerDown,m=>{!a&&m.button===0&&m.ctrlKey===!1&&(i.onOpenToggle(),i.open||m.preventDefault())}),onKeyDown:w(t.onKeyDown,m=>{a||(["Enter"," "].includes(m.key)&&i.onOpenToggle(),m.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(m.key)&&m.preventDefault())})})})});Nt.displayName=yt;var jn="DropdownMenuPortal",St=t=>{const{__scopeDropdownMenu:n,...r}=t,a=M(n);return e.jsx(on,{...a,...r})};St.displayName=jn;var bt="DropdownMenuContent",Dt=s.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...a}=t,c=Ct(bt,r),i=M(r),f=s.useRef(!1);return e.jsx(sn,{id:c.contentId,"aria-labelledby":c.triggerId,...i,...a,ref:n,onCloseAutoFocus:w(t.onCloseAutoFocus,m=>{f.current||c.triggerRef.current?.focus(),f.current=!1,m.preventDefault()}),onInteractOutside:w(t.onInteractOutside,m=>{const x=m.detail.originalEvent,v=x.button===0&&x.ctrlKey===!0,p=x.button===2||v;(!c.modal||p)&&(f.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Dt.displayName=bt;var Cn="DropdownMenuGroup",Mn=s.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...a}=t,c=M(r);return e.jsx(cn,{...c,...a,ref:n})});Mn.displayName=Cn;var yn="DropdownMenuLabel",Et=s.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...a}=t,c=M(r);return e.jsx(dn,{...c,...a,ref:n})});Et.displayName=yn;var Nn="DropdownMenuItem",Rt=s.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...a}=t,c=M(r);return e.jsx(ln,{...c,...a,ref:n})});Rt.displayName=Nn;var Sn="DropdownMenuCheckboxItem",It=s.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...a}=t,c=M(r);return e.jsx(un,{...c,...a,ref:n})});It.displayName=Sn;var bn="DropdownMenuRadioGroup",Dn=s.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...a}=t,c=M(r);return e.jsx(mn,{...c,...a,ref:n})});Dn.displayName=bn;var En="DropdownMenuRadioItem",Pt=s.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...a}=t,c=M(r);return e.jsx(pn,{...c,...a,ref:n})});Pt.displayName=En;var Rn="DropdownMenuItemIndicator",At=s.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...a}=t,c=M(r);return e.jsx(fn,{...c,...a,ref:n})});At.displayName=Rn;var In="DropdownMenuSeparator",Tt=s.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...a}=t,c=M(r);return e.jsx(hn,{...c,...a,ref:n})});Tt.displayName=In;var Pn="DropdownMenuArrow",An=s.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...a}=t,c=M(r);return e.jsx(xn,{...c,...a,ref:n})});An.displayName=Pn;var Tn="DropdownMenuSubTrigger",kt=s.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...a}=t,c=M(r);return e.jsx(vn,{...c,...a,ref:n})});kt.displayName=Tn;var kn="DropdownMenuSubContent",Ot=s.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...a}=t,c=M(r);return e.jsx(gn,{...c,...a,ref:n,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ot.displayName=kn;var On=Mt,Fn=Nt,Ln=St,Ft=Dt,Lt=Et,Gt=Rt,Yt=It,Kt=Pt,Ut=At,$t=Tt,Bt=kt,zt=Ot;const Ve=On,He=Fn,Gn=s.forwardRef(({className:t,inset:n,children:r,...a},c)=>e.jsxs(Bt,{ref:c,className:K("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",n&&"pl-8",t),...a,children:[r,e.jsx(hr,{className:"ml-auto h-4 w-4"})]}));Gn.displayName=Bt.displayName;const Yn=s.forwardRef(({className:t,...n},r)=>e.jsx(zt,{ref:r,className:K("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));Yn.displayName=zt.displayName;const Me=s.forwardRef(({className:t,sideOffset:n=4,...r},a)=>e.jsx(Ln,{children:e.jsx(Ft,{ref:a,sideOffset:n,className:K("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));Me.displayName=Ft.displayName;const B=s.forwardRef(({className:t,inset:n,...r},a)=>e.jsx(Gt,{ref:a,className:K("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",t),...r}));B.displayName=Gt.displayName;const Kn=s.forwardRef(({className:t,children:n,checked:r,...a},c)=>e.jsxs(Yt,{ref:c,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ut,{children:e.jsx(vr,{className:"h-4 w-4"})})}),n]}));Kn.displayName=Yt.displayName;const Un=s.forwardRef(({className:t,children:n,...r},a)=>e.jsxs(Kt,{ref:a,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ut,{children:e.jsx(Dr,{className:"h-2 w-2 fill-current"})})}),n]}));Un.displayName=Kt.displayName;const $n=s.forwardRef(({className:t,inset:n,...r},a)=>e.jsx(Lt,{ref:a,className:K("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",t),...r}));$n.displayName=Lt.displayName;const Bn=s.forwardRef(({className:t,...n},r)=>e.jsx($t,{ref:r,className:K("-mx-1 my-1 h-px bg-muted",t),...n}));Bn.displayName=$t.displayName;const ia=()=>{const{toast:t}=rr(),[n,r]=s.useState([]),[a,c]=s.useState({}),[i,f]=s.useState(!0),[m,x]=s.useState(null),[v,p]=s.useState(!1),[l,h]=s.useState(!1),[j,g]=s.useState(null),[S,A]=s.useState(null),[L,se]=s.useState(""),[U,ce]=s.useState(""),[C,R]=s.useState({name:"",start_date:"",end_date:"",description:""}),[_,T]=s.useState({name:"",start_date:"",end_date:"",description:""});s.useEffect(()=>{b()},[]);const b=async()=>{try{f(!0);const{data:o,error:d}=await D.from("academic_years").select("*").order("start_date",{ascending:!1});if(d)throw d;if(r(o||[]),o&&o.length>0){const{data:y,error:F}=await D.from("semesters").select("*").order("start_date",{ascending:!0});if(F)throw F;const $={};y?.forEach(I=>{$[I.academic_year_id]||($[I.academic_year_id]=[]),$[I.academic_year_id].push(I)}),c($),o.length>0&&x(o[0].id)}}catch(o){console.error("Error fetching academic years:",o),t({title:"Error",description:"Failed to fetch academic years",variant:"destructive"})}finally{f(!1)}},H=async()=>{try{if(j){const{error:o}=await D.from("academic_years").update({name:C.name,start_date:C.start_date,end_date:C.end_date,description:C.description}).eq("id",j.id);if(o)throw o;t({title:"Success",description:"Academic year updated successfully"})}else{const{error:o}=await D.from("academic_years").insert([{name:C.name,start_date:C.start_date,end_date:C.end_date,description:C.description,is_active:!1}]);if(o)throw o;t({title:"Success",description:"Academic year created successfully"})}p(!1),g(null),R({name:"",start_date:"",end_date:"",description:""}),b()}catch(o){console.error("Error saving academic year:",o),t({title:"Error",description:"Failed to save academic year",variant:"destructive"})}},we=async()=>{try{if(S){const{error:o}=await D.from("semesters").update({name:_.name,start_date:_.start_date,end_date:_.end_date,description:_.description}).eq("id",S.id);if(o)throw o;t({title:"Success",description:"Semester updated successfully"})}else{const{error:o}=await D.from("semesters").insert([{academic_year_id:L,name:_.name,start_date:_.start_date,end_date:_.end_date,description:_.description,is_active:!1}]);if(o)throw o;t({title:"Success",description:"Semester created successfully"})}h(!1),A(null),se(""),T({name:"",start_date:"",end_date:"",description:""}),b()}catch(o){console.error("Error saving semester:",o),t({title:"Error",description:"Failed to save semester",variant:"destructive"})}},W=async o=>{if(window.confirm("Are you sure you want to delete this academic year? This will also delete all associated semesters."))try{const{error:d}=await D.from("academic_years").delete().eq("id",o);if(d)throw d;t({title:"Success",description:"Academic year deleted successfully"}),b()}catch(d){console.error("Error deleting academic year:",d),t({title:"Error",description:"Failed to delete academic year",variant:"destructive"})}},ie=async o=>{if(window.confirm("Are you sure you want to delete this semester?"))try{const{error:d}=await D.from("semesters").delete().eq("id",o);if(d)throw d;t({title:"Success",description:"Semester deleted successfully"}),b()}catch(d){console.error("Error deleting semester:",d),t({title:"Error",description:"Failed to delete semester",variant:"destructive"})}},Z=async o=>{try{const{error:d}=await D.from("academic_years").update({is_active:!1});if(d)throw d;const{error:y}=await D.from("academic_years").update({is_active:!0}).eq("id",o);if(y)throw y;t({title:"Success",description:"Active academic year updated"}),b()}catch(d){console.error("Error setting active year:",d),t({title:"Error",description:"Failed to set active academic year",variant:"destructive"})}},_e=async(o,d)=>{try{const{error:y}=await D.from("semesters").update({is_active:!1}).eq("academic_year_id",d);if(y)throw y;const{error:F}=await D.from("semesters").update({is_active:!0}).eq("id",o);if(F)throw F;t({title:"Success",description:"Active semester updated"}),b()}catch(y){console.error("Error setting active semester:",y),t({title:"Error",description:"Failed to set active semester",variant:"destructive"})}},de=o=>{x(m===o?null:o)},X=o=>br(new Date(o),"MMM d, yyyy"),k=n.filter(o=>o.name.toLowerCase().includes(U.toLowerCase())||o.description?.toLowerCase().includes(U.toLowerCase())),u=o=>{o?(g(o),R({name:o.name,start_date:o.start_date,end_date:o.end_date,description:o.description||""})):(g(null),R({name:"",start_date:"",end_date:"",description:""})),p(!0)},O=(o,d)=>{se(o),d?(A(d),T({name:d.name,start_date:d.start_date,end_date:d.end_date,description:d.description||""})):(A(null),T({name:"",start_date:"",end_date:"",description:""})),h(!0)};return e.jsx(xr,{children:e.jsxs("div",{className:"flex-1 space-y-4 px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Academic Years"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage academic years and their semesters for the institution"})]}),e.jsxs(P,{className:"bg-gradient-primary shadow-glow h-9",onClick:()=>u(),children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),"Add Academic Year"]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(Sr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(G,{type:"search",placeholder:"Search academic years...",className:"pl-8",value:U,onChange:o=>ce(o.target.value)})]})}),e.jsxs(cr,{children:[e.jsx(ir,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs(dr,{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5"}),"Academic Year Management"]}),e.jsx(lr,{children:"View and manage all academic years and their semesters"})]})})}),e.jsx(ur,{children:i?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-4",children:[k.map(o=>e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 cursor-pointer hover:bg-muted/70 transition-colors",onClick:()=>de(o.id),children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Ue,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[o.name,o.is_active&&e.jsx(le,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Active"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[X(o.start_date)," - ",X(o.end_date)]}),o.description&&e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:o.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Ve,{children:[e.jsx(He,{asChild:!0,children:e.jsxs(P,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx($e,{className:"h-4 w-4"})]})}),e.jsxs(Me,{align:"end",children:[e.jsxs(B,{onClick:()=>u(o),children:[e.jsx(Be,{className:"mr-2 h-4 w-4"}),"Edit Year"]}),!o.is_active&&e.jsxs(B,{onClick:()=>Z(o.id),children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),"Set as Active"]}),e.jsxs(B,{className:"text-red-600",onClick:()=>W(o.id),children:[e.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Delete Year"]})]})]}),e.jsx(P,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:d=>{d.stopPropagation(),de(o.id)},children:e.jsx(gr,{className:`h-4 w-4 transition-transform ${m===o.id?"rotate-180":""}`})})]})]}),m===o.id&&e.jsxs("div",{className:"border-t p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"font-medium",children:"Semesters"}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>O(o.id),children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),"Add Semester"]})]}),a[o.id]&&a[o.id].length>0?e.jsxs(mr,{children:[e.jsx(pr,{children:e.jsxs(Te,{children:[e.jsx(J,{children:"Name"}),e.jsx(J,{children:"Start Date"}),e.jsx(J,{children:"End Date"}),e.jsx(J,{children:"Status"}),e.jsx(J,{className:"text-right",children:"Actions"})]})}),e.jsx(fr,{children:a[o.id].map(d=>e.jsxs(Te,{children:[e.jsx(Q,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:d.name}),d.description&&e.jsx("div",{className:"text-sm text-muted-foreground",children:d.description})]})}),e.jsx(Q,{children:X(d.start_date)}),e.jsx(Q,{children:X(d.end_date)}),e.jsx(Q,{children:d.is_active?e.jsx(le,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Active"}):new Date>new Date(d.end_date)?e.jsx(le,{variant:"outline",className:"border-gray-300",children:"Completed"}):e.jsx(le,{variant:"outline",className:"text-amber-600 border-amber-200 bg-amber-50",children:"Upcoming"})}),e.jsx(Q,{className:"text-right",children:e.jsxs(Ve,{children:[e.jsx(He,{asChild:!0,children:e.jsxs(P,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx($e,{className:"h-4 w-4"})]})}),e.jsxs(Me,{align:"end",children:[e.jsxs(B,{onClick:()=>O(o.id,d),children:[e.jsx(Be,{className:"mr-2 h-4 w-4"}),"Edit Semester"]}),!d.is_active&&new Date<=new Date(d.end_date)&&e.jsxs(B,{className:"text-green-600",onClick:()=>_e(d.id,o.id),children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),"Set as Active"]}),e.jsxs(B,{className:"text-red-600",onClick:()=>ie(d.id),children:[e.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Delete Semester"]})]})]})})]},d.id))})]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ue,{className:"mx-auto h-12 w-12 mb-4"}),e.jsx("h3",{className:"text-sm font-medium",children:"No semesters"}),e.jsx("p",{className:"text-sm",children:"Add semesters to organize this academic year."})]})]})]},o.id)),k.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ue,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"No academic years found"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:U?"No academic years match your search.":"Get started by creating your first academic year."}),!U&&e.jsxs(P,{onClick:()=>u(),children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),"Add Academic Year"]})]})]})})]}),e.jsx(ke,{open:v,onOpenChange:p,children:e.jsxs(Oe,{className:"max-w-md",children:[e.jsxs(Fe,{children:[e.jsx(Le,{children:j?"Edit Academic Year":"New Academic Year"}),e.jsx(Ge,{children:j?"Update the academic year details.":"Create a new academic year for the institution."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"year-name",children:"Name"}),e.jsx(G,{id:"year-name",value:C.name,onChange:o=>R(d=>({...d,name:o.target.value})),placeholder:"e.g., 2024-2025"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"start-date",children:"Start Date"}),e.jsx(G,{id:"start-date",type:"date",value:C.start_date,onChange:o=>R(d=>({...d,start_date:o.target.value}))})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"end-date",children:"End Date"}),e.jsx(G,{id:"end-date",type:"date",value:C.end_date,onChange:o=>R(d=>({...d,end_date:o.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"year-description",children:"Description (Optional)"}),e.jsx(G,{id:"year-description",value:C.description,onChange:o=>R(d=>({...d,description:o.target.value})),placeholder:"Brief description of the academic year"})]})]}),e.jsxs(Ye,{children:[e.jsx(P,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsxs(P,{onClick:H,disabled:!C.name||!C.start_date||!C.end_date,children:[j?"Update":"Create"," Academic Year"]})]})]})}),e.jsx(ke,{open:l,onOpenChange:h,children:e.jsxs(Oe,{className:"max-w-md",children:[e.jsxs(Fe,{children:[e.jsx(Le,{children:S?"Edit Semester":"New Semester"}),e.jsx(Ge,{children:S?"Update the semester details.":"Create a new semester within the academic year."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"semester-name",children:"Name"}),e.jsxs(wr,{value:_.name,onValueChange:o=>T(d=>({...d,name:o})),children:[e.jsx(_r,{children:e.jsx(jr,{placeholder:"Select semester type"})}),e.jsxs(Cr,{children:[e.jsx(me,{value:"1st Semester",children:"1st Semester"}),e.jsx(me,{value:"2nd Semester",children:"2nd Semester"}),e.jsx(me,{value:"Summer",children:"Summer"}),e.jsx(me,{value:"Intersession",children:"Intersession"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"semester-start-date",children:"Start Date"}),e.jsx(G,{id:"semester-start-date",type:"date",value:_.start_date,onChange:o=>T(d=>({...d,start_date:o.target.value}))})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"semester-end-date",children:"End Date"}),e.jsx(G,{id:"semester-end-date",type:"date",value:_.end_date,onChange:o=>T(d=>({...d,end_date:o.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"semester-description",children:"Description (Optional)"}),e.jsx(G,{id:"semester-description",value:_.description,onChange:o=>T(d=>({...d,description:o.target.value})),placeholder:"Brief description of the semester"})]})]}),e.jsxs(Ye,{children:[e.jsx(P,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsxs(P,{onClick:we,disabled:!_.name||!_.start_date||!_.end_date,children:[S?"Update":"Create"," Semester"]})]})]})})]})})};export{ia as default};
