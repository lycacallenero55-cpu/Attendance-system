import{f as be,d as Te,r as d,s as k,j as t}from"./index-UN-xnaxC.js";import{L as K,D as me,b as he,c as $e,d as Le,g as _e,C as J,U as ge}from"./Layout-8fUh4t3a.js";import{B as L}from"./index-BHXN4u0M.js";import{B}from"./badge-CJDHipBu.js";import{I as Ee}from"./input-DAyyV8TZ.js";import{S as X,a as Z,b as ee,c as te,d as C}from"./select-iVWGPqxU.js";import{C as A,c as O}from"./card-CBRuYr9b.js";import{A as Me}from"./AttendanceForm-CVSBwrSC.js";import{u as ke,c as Ae,d as Oe}from"./supabaseService-CbAvcaVR.js";import{P as xe,T as Ue}from"./trash-2-ByxKJTz_.js";import{S as Fe}from"./search-Hjuxt4p9.js";import{L as Pe}from"./loader-circle-DlTFvp4H.js";import{f as Ie}from"./format-CR8w9UPR.js";import{C as Ye}from"./clock-BG4YUBg_.js";import{S as qe}from"./square-pen-DZSYq43Y.js";import{B as pe}from"./book-open-Ypo8aewU.js";import{S as We}from"./star-BRZ_MZh0.js";import"./index-D5Qizld_.js";const H=g=>{if(!g)return"--:--";const[f,w]=g.split(":"),x=parseInt(f,10),v=w||"00",j=x>=12?"PM":"AM";return`${x%12||12}:${v} ${j}`},W=g=>{try{if(typeof g=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(g))return g;const f=new Date(g);if(isNaN(f.getTime())){console.error("Invalid date provided to formatDateString:",g);const m=new Date;return`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}-${String(m.getDate()).padStart(2,"0")}`}const w=f.getUTCFullYear(),x=String(f.getUTCMonth()+1).padStart(2,"0"),v=String(f.getUTCDate()).padStart(2,"0"),j=`${w}-${x}-${v}`;return console.log("Formatted date:",{input:g,output:j}),j}catch(f){console.error("Error in formatDateString:",f);const w=new Date;return`${w.getFullYear()}-${String(w.getMonth()+1).padStart(2,"0")}-${String(w.getDate()).padStart(2,"0")}`}},ze=g=>{try{const f=new Date(g),w=f.getUTCDay(),x=new Date(f);x.setUTCDate(f.getUTCDate()-w);const v=[];for(let j=0;j<7;j++){const m=new Date(Date.UTC(x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate()+j,0,0,0,0));v.push(m)}return console.log("Generated week dates:"),v.forEach((j,m)=>{console.log(`Day ${m}:`,j.toISOString().split("T")[0])}),v}catch(f){console.error("Error in getWeekDates:",f);const w=new Date,x=w.getUTCDay(),v=new Date(w);return v.setUTCDate(w.getUTCDate()-x),Array.from({length:7},(j,m)=>{const b=new Date(v);return b.setUTCDate(v.getUTCDate()+m),b})}},ut=()=>{const{toast:g}=be(),f=Te(),w=d.useMemo(()=>{const e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())},[]),[x,v]=d.useState(w),[j,m]=d.useState(!1),[b,Y]=d.useState(null),[Q,ae]=d.useState(null),[fe,z]=d.useState(!1),[ye,U]=d.useState(!0),[V,q]=d.useState(null),[y,F]=d.useState([]),[we,re]=d.useState([]),[Ve,se]=d.useState(!0),[_,ne]=d.useState(""),[E,le]=d.useState("all"),[M,oe]=d.useState("all"),[T,ie]=d.useState("all"),R=d.useMemo(()=>ze(x),[x]);d.useEffect(()=>{b&&m(!0)},[b,m]),d.useMemo(()=>{const e={weekday:"long",year:"numeric",month:"long",day:"numeric"};return x.toLocaleDateString("en-US",e)},[x]),d.useCallback(async(e,n)=>{console.log("loadSessions called with:",{dates:e,minDate:n}),U(!0),q(null);try{let a=k.from("sessions").select("*").order("date",{ascending:!0}).order("time_in",{ascending:!0});if(n)a=a.gte("date",n);else if(e&&e.length>0){const s=W(e[0]),u=W(e[e.length-1]);a=a.gte("date",s).lte("date",u)}const{data:o,error:i}=await a;if(i)throw i;if(!o||o.length===0){F([]);return}const c=new Set;o.forEach(s=>{const u=s.program||"All Programs",N=s.year||"All Year Levels",p=s.section||"All Sections";c.add(`${u}::${N}::${p}`)});const l=Array.from(c).map(async s=>{const[u,N,p]=s.split("::");let D=k.from("students").select("*",{count:"exact",head:!0});if(u&&!u.toLowerCase().includes("all")&&(D=D.eq("program",u)),N&&!N.toLowerCase().includes("all")){let I=N;I==="All Years"||I==="All Year Levels"||(I.endsWith(" Year")&&(I=I.replace(" Year","")),D=D.eq("year",I))}p&&!p.toLowerCase().includes("all")&&(D=D.eq("section",p));const{count:G}=await D;return{program:u,year:N,section:p,count:G||0}}),r=await Promise.all(l),h=new Map;r.forEach(({program:s,year:u,section:N,count:p})=>{h.set(`${s}::${u}::${N}`,p)});const S=o.map(s=>{const u=s.program||"All Programs",N=s.year||"All Year Levels",p=s.section||"All Sections",D=`${u}::${N}::${p}`,G=h.get(D)||0;return{id:s.id,title:s.title||"Untitled Session",type:s.type||"class",time_in:s.time_in||"",time_out:s.time_out||"",time:s.time_in&&s.time_out?`${H(s.time_in)} - ${H(s.time_out)}`:"",location:s.location||"Not specified",instructor:s.instructor||"Instructor",students:G,program:s.program||"General",year:s.year||"All Year Levels",section:s.section||"All Sections",description:s.description||"",capacity:s.capacity?String(s.capacity):"Unlimited",date:s.date,created_at:s.created_at||new Date().toISOString(),updated_at:s.updated_at||new Date().toISOString()}});F(S)}catch(a){console.error("Failed to load sessions:",a),q("Failed to load sessions. Please try again later.")}finally{U(!1)}},[]);const ce=d.useCallback(async()=>{try{se(!0);let e=[],n=0;const a=1e3;let o=!0;for(;o;){const{data:l,error:r,count:h}=await k.from("students").select("program",{count:"exact"}).not("program","is",null).range(n*a,(n+1)*a-1);if(r)throw r;l&&l.length>0?(e=[...e,...l],n++,l.length<a&&(o=!1)):o=!1}console.log(`Fetched ${e.length} students with programs`);const i=new Set;e.forEach(l=>{if(l.program){const r=l.program.toString().trim();r&&i.add(r)}});const c=Array.from(i).sort((l,r)=>l.localeCompare(r,"en",{sensitivity:"base"}));console.log("Unique programs found:",c),re(c)}catch(e){console.error("Error fetching programs:",e),re([])}finally{se(!1)}},[]);d.useEffect(()=>{ce()},[ce]);const de=d.useCallback(async()=>{try{U(!0),q(null);const{data:e,error:n}=await k.from("sessions").select("*").order("date",{ascending:!0});if(n)throw n;const a=new Set(e.filter(r=>r.program&&r.year&&r.section).map(r=>`${r.program}::${r.year}::${r.section}`)),o=Array.from(a).map(async r=>{const[h,S,s]=r.split("::");let u=k.from("students").select("*",{count:"exact",head:!0});if(h&&!h.toLowerCase().includes("all")&&(u=u.eq("program",h)),S&&!S.toLowerCase().includes("all")){let p=S;p==="All Years"||p==="All Year Levels"||(p.endsWith(" Year")&&(p=p.replace(" Year","")),u=u.eq("year",p))}s&&!s.toLowerCase().includes("all")&&(u=u.eq("section",s));const{count:N}=await u;return{program:h,year:S,section:s,count:N||0}}),i=await Promise.all(o),c=new Map;i.forEach(({program:r,year:h,section:S,count:s})=>{c.set(`${r}::${h}::${S}`,s)});const l=e.map(r=>{const h=`${r.program||"all"}::${r.year||"all"}::${r.section||"all"}`,S=c.get(h)||0;return{id:r.id,title:r.title||"Untitled Session",type:r.type||"class",time_in:r.time_in||"",time_out:r.time_out||"",time:r.time_in&&r.time_out?`${H(r.time_in)} - ${H(r.time_out)}`:"",location:r.location||"Not specified",instructor:r.instructor||"Instructor",students:S,program:r.program||"General",year:r.year||"All Year Levels",section:r.section||"All Sections",description:r.description||"",capacity:r.capacity?String(r.capacity):"Unlimited",date:r.date,created_at:r.created_at||new Date().toISOString(),updated_at:r.updated_at||new Date().toISOString()}});F(l)}catch(e){console.error("Failed to load sessions:",e),q("Failed to load sessions. Please try again later.")}finally{U(!1)}},[]);d.useEffect(()=>{let e=!0;return(async()=>{try{console.log("Loading all sessions"),await de()}catch(a){e&&(console.error("Error in loadSessions:",a),q("Failed to load sessions. Please try again."),U(!1))}finally{e&&U(!1)}})(),()=>{e=!1}},[R,T,de]);const P=d.useMemo(()=>{const e=new Date;e.setHours(0,0,0,0);const n=new Date(e);n.setDate(e.getDate()-e.getDay());const a=new Date(n);a.setDate(n.getDate()+6);const o=new Date(e.getFullYear(),e.getMonth(),1),i=new Date(e.getFullYear(),e.getMonth()+1,0);return{today:e,startOfWeek:n,endOfWeek:a,startOfMonth:o,endOfMonth:i}},[]),ue=d.useCallback(e=>{if(_){const i=_.toLowerCase();if(!(e.title?.toLowerCase().includes(i)||e.program?.toLowerCase().includes(i)||e.location?.toLowerCase().includes(i)||e.instructor?.toLowerCase().includes(i)||e.description?.toLowerCase().includes(i)))return!1}if(E!=="all"&&e.type!==E||M!=="all"&&e.program!==M)return!1;if(T==="all")return!0;const n=new Date(e.date);n.setHours(0,0,0,0);const a=n.getTime(),o=P.today.getTime();switch(T){case"today":return a===o;case"week":return a>=P.startOfWeek.getTime()&&a<=P.endOfWeek.getTime();case"month":return a>=P.startOfMonth.getTime()&&a<=P.endOfMonth.getTime();case"upcoming":return a>o;case"past":return a<o;default:return!0}},[_,E,M,T,P]),$=d.useMemo(()=>y.length?_||E!=="all"||M!=="all"||T!=="all"?y.filter(ue):y:[],[y,ue,_,E,M,T]),{sessionStats:Be,weeklySessionCounts:He}=d.useMemo(()=>{const e={total:0,classes:0,events:0,activities:0,totalStudents:0};$.forEach(a=>{a&&(e.total++,a.type==="class"?e.classes++:a.type==="event"?e.events++:a.type==="other"&&e.activities++,e.totalStudents+=Number(a.students)||0)});const n=R.map(a=>{const o=W(a);return $.filter(i=>i&&i.date===o).length});return{sessionStats:e,weeklySessionCounts:n}},[$,R]);d.useMemo(()=>$.filter(e=>e&&e.date===W(x)),[$,x]);const ve=async e=>{try{if(!e.title||!e.date||!e.timeIn||!e.timeOut||!e.attendanceType)throw new Error("Missing required fields");const n=W(e.date),a={title:e.title,type:e.attendanceType,time_in:e.timeIn,time_out:e.timeOut,location:e.venue||"Not specified",program:e.program||"General",year:e.year||"All Year Levels",section:e.section||"All Sections",description:e.description||"",capacity:e.capacity?String(e.capacity):"Unlimited",date:n,instructor:"Instructor"};if(console.log("Sending session data to server:",JSON.stringify(a,null,2)),b?.id){const o=b.id;try{await ke(o,a);let i=0;try{let c=k.from("students").select("*",{count:"exact",head:!0});if(a.program&&!a.program.toLowerCase().includes("all")&&(c=c.eq("program",a.program.trim())),a.year&&!a.year.toLowerCase().includes("all")){let r=a.year.trim();r.endsWith(" Year")&&(r=r.replace(" Year","")),c=c.eq("year",r)}a.section&&!a.section.toLowerCase().includes("all")&&(c=c.eq("section",a.section.trim()));const{count:l}=await c;i=l||0}catch(c){console.error("Error calculating student count:",c),i=0}F(c=>c.map(l=>l.id===o?{...l,...a,time:`${a.time_in} - ${a.time_out}`,students:i}:l)),g({title:"Success",description:"Session updated successfully",variant:"default"})}catch(i){throw console.error("Error updating session:",i),i}}else try{const o=await Ae(a);let i=0;try{let l=k.from("students").select("*",{count:"exact",head:!0});if(a.program&&!a.program.toLowerCase().includes("all")&&(l=l.eq("program",a.program.trim())),a.year&&!a.year.toLowerCase().includes("all")){let h=a.year.trim();h.endsWith(" Year")&&(h=h.replace(" Year","")),l=l.eq("year",h)}a.section&&!a.section.toLowerCase().includes("all")&&(l=l.eq("section",a.section.trim()));const{count:r}=await l;i=r||0}catch(l){console.error("Error calculating student count:",l),i=0}const c={...a,id:o.id,time:`${a.time_in} - ${a.time_out}`,students:i,created_at:o.created_at||new Date().toISOString(),updated_at:o.updated_at||new Date().toISOString(),title:a.title,type:a.type,time_in:a.time_in,time_out:a.time_out,location:a.location,instructor:a.instructor,program:a.program,year:a.year,section:a.section,description:a.description,capacity:a.capacity,date:a.date};F(l=>l.some(r=>r.id===c.id)?l:[...l,c]),g({title:"Success",description:"Session created successfully",variant:"default"})}catch(o){throw console.error("Error creating session:",o),o}Y(null),m(!1)}catch(n){console.error("Error saving session:",n),g({title:"Error",description:n instanceof Error?n.message:"Failed to save session. Please try again.",variant:"destructive"})}},je=async e=>{try{const n=c=>{if(!c)return"";if(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/.test(c))return c;const l=c.match(/(\d+):(\d+)\s*(AM|PM)/i);if(!l)return"";const[r,h,S,s]=l;let u=parseInt(h,10);return s.toUpperCase()==="PM"&&u<12?u+=12:s.toUpperCase()==="AM"&&u===12&&(u=0),`${String(u).padStart(2,"0")}:${S}`};let a="",o="";if(e.time){const c=e.time.split(" - ");a=n(c[0]||""),o=n(c[1]||"")}else a=n(e.time_in||""),o=n(e.time_out||"");console.log("Editing session:",{...e,timeIn:a,timeOut:o,year:e.year});const i={id:e.id,title:e.title,program:e.program||"",year:e.year||"All Year Levels",section:e.section||"",date:e.date,timeIn:a,timeOut:o,description:e.description||"",venue:e.location||"Not specified",capacity:e.capacity||"Unlimited",attendanceType:e.type||"class"};Y(i),m(!0)}catch(n){console.error("Error preparing session for edit:",n),g({title:"Error",description:"Failed to prepare session for editing. Please try again.",variant:"destructive"})}},Se=e=>{ae(e),z(!0)},Ne=async()=>{if(Q)try{await Oe(Q),F(y.filter(e=>e.id!==Q)),g({title:"Success",description:"Session deleted successfully."})}catch(e){console.error("Error deleting session:",e),g({title:"Error",description:"Failed to delete session. Please try again.",variant:"destructive"})}finally{z(!1),ae(null)}},Ce=e=>{switch(e){case"class":return t.jsx(pe,{className:"w-4 h-4 text-primary"});case"event":return t.jsx(J,{className:"w-4 h-4 text-accent"});case"other":return t.jsx(We,{className:"w-4 h-4 text-education-navy"});default:return t.jsx(pe,{className:"w-4 h-4 text-primary"})}},De=e=>{switch(e){case"class":return t.jsx(B,{className:"bg-primary/10 text-primary border-primary/20",children:"Class"});case"event":return t.jsx(B,{className:"bg-accent/10 text-accent border-accent/20",children:"Event"});case"other":return t.jsx(B,{className:"bg-education-navy/10 text-education-navy border-education-navy/20",children:"Activity"});default:return t.jsx(B,{children:"Unknown"})}};return d.useCallback(e=>{v(n=>{const a=new Date(n);if(e==="today"){const i=new Date;return new Date(i.getFullYear(),i.getMonth(),i.getDate())}const o=e==="next"?7:-7;return a.setDate(n.getDate()+o),console.log("Navigating to week starting from:",a.toISOString().split("T")[0]),a})},[]),d.useCallback(e=>e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),[]),V?t.jsx(K,{children:t.jsx("div",{className:"p-8",children:t.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[t.jsx("strong",{className:"font-bold",children:"Error: "}),t.jsx("span",{className:"block sm:inline",children:V})]})})}):V?t.jsx(K,{children:t.jsx("div",{className:"p-8",children:t.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm text-red-700",children:V})})]})})})}):t.jsxs(K,{children:[t.jsx(me,{open:j,onOpenChange:e=>{m(e),e||(Y(null),setTimeout(()=>{Y(null)},100))},children:t.jsx(he,{className:"max-w-4xl max-h-[90vh]",children:t.jsx("div",{className:"py-4",children:t.jsx(Me,{onSuccess:()=>{m(!1),Y(null)},onSubmit:ve,initialData:b})})})}),t.jsx(me,{open:fe,onOpenChange:z,children:t.jsxs(he,{className:"sm:max-w-[425px]",children:[t.jsx($e,{children:t.jsx(Le,{className:"text-education-navy",children:"Delete Session"})}),t.jsx("div",{className:"py-4",children:t.jsx("p",{children:"Are you sure you want to delete this session? This action cannot be undone."})}),t.jsxs(_e,{children:[t.jsx(L,{variant:"outline",onClick:()=>z(!1),className:"text-education-navy",children:"Cancel"}),t.jsx(L,{variant:"destructive",onClick:Ne,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Session"})]})]})}),t.jsxs("div",{className:"px-6 py-4 space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-education-navy",children:"Schedule"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage and view scheduled sessions"})]}),t.jsxs(L,{onClick:()=>m(!0),size:"sm",className:"bg-gradient-primary text-white hover:bg-gradient-primary/90 shadow-glow hover:shadow-elegant transition-all duration-300 text-sm h-9",children:[t.jsx(xe,{className:"w-3.5 h-3.5 mr-1.5"}),"Add Session"]})]}),t.jsx(A,{className:"bg-gradient-card border-0 shadow-card mb-6",children:t.jsxs(O,{className:"p-4",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Fe,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 text-muted-foreground w-3.5 h-3.5"}),t.jsx(Ee,{placeholder:"Search sessions...",className:"pl-8 h-9 text-sm",value:_,onChange:e=>ne(e.target.value)})]}),t.jsxs(X,{value:E,onValueChange:le,children:[t.jsx(Z,{className:"h-9 text-xs",children:t.jsx(ee,{placeholder:"All Types"})}),t.jsxs(te,{children:[t.jsx(C,{value:"all",className:"text-xs",children:"All Types"}),t.jsx(C,{value:"class",className:"text-xs",children:"Classes"}),t.jsx(C,{value:"event",className:"text-xs",children:"Events"}),t.jsx(C,{value:"other",className:"text-xs",children:"Activities"})]})]}),t.jsxs(X,{value:M,onValueChange:oe,children:[t.jsx(Z,{className:"h-9 text-xs w-full",children:t.jsx(ee,{placeholder:"All Programs"})}),t.jsxs(te,{children:[t.jsx(C,{value:"all",className:"text-xs",children:"All Programs"}),we.map(e=>t.jsx(C,{value:e,className:"text-xs",children:e},e))]})]}),t.jsxs(X,{value:T,onValueChange:ie,children:[t.jsx(Z,{className:"h-9 text-xs",children:t.jsx(ee,{placeholder:"Date Range"})}),t.jsxs(te,{children:[t.jsx(C,{value:"all",className:"text-xs",children:"All Sessions"}),t.jsx(C,{value:"today",className:"text-xs",children:"Today"}),t.jsx(C,{value:"week",className:"text-xs",children:"This Week"}),t.jsx(C,{value:"month",className:"text-xs",children:"This Month"}),t.jsx(C,{value:"upcoming",className:"text-xs",children:"Upcoming"}),t.jsx(C,{value:"past",className:"text-xs",children:"Past Sessions"})]})]})]}),t.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:["Showing ",$.length," of ",y.length," sessions",(_||E!=="all"||M!=="all"||T!=="all")&&t.jsxs("span",{children:[" ","matching current filters",t.jsx(L,{variant:"ghost",size:"sm",className:"ml-2 h-auto p-0 text-blue-600 hover:bg-accent/30 hover:text-blue-700 hover:underline transition-colors duration-200 rounded-sm px-1.5 py-0.5",onClick:()=>{ne(""),le("all"),oe("all"),ie("all")},children:"Clear all"})]})]})]})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("h3",{className:"text-base font-semibold text-education-navy flex items-center gap-2",children:[t.jsx(J,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm",children:"Scheduled Sessions"})]})}),t.jsx("div",{className:"grid gap-2",children:ye?t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx(Pe,{className:"w-6 h-6 animate-spin text-education-blue mr-2"}),t.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading sessions..."})]}):$.length>0?[...$].sort((e,n)=>new Date(n.date).getTime()-new Date(e.date).getTime()).map(e=>t.jsx(A,{className:"bg-gradient-card border-0 shadow-card hover:shadow-elegant transition-all duration-300",children:t.jsx(O,{className:"p-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-lg bg-gradient-primary/10",children:Ce(e.type)}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[t.jsx("h4",{className:"font-medium text-education-navy text-sm",children:e.title}),De(e.type),t.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:Ie(new Date(e.date),"MMM d, yyyy")})]}),t.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Ye,{className:"w-2.5 h-2.5"}),e.time]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(ge,{className:"w-2.5 h-2.5"}),e.students," students"]})]}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:[e.program," • ",e.year,e.section&&` • ${e.section}`]})]})]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx(L,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>f(`/sessions/${e.id}/students`),title:"View Students",children:t.jsx(ge,{className:"h-4 w-4"})}),t.jsx(L,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>je(e),title:"Edit Session",children:t.jsx(qe,{className:"h-4 w-4"})}),t.jsx(L,{variant:"outline",size:"sm",className:"h-8 w-8 p-0 text-destructive hover:text-destructive",onClick:()=>Se(e.id),title:"Delete Session",children:t.jsx(Ue,{className:"h-4 w-4"})})]})]})})},e.id)):t.jsx(A,{className:"bg-gradient-card border-0 shadow-card",children:t.jsxs(O,{className:"p-8 text-center",children:[t.jsx(J,{className:"w-10 h-10 mx-auto text-muted-foreground mb-2"}),t.jsx("h4",{className:"text-lg font-medium text-education-navy",children:y.length===0?"No sessions scheduled":"No matching sessions found"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:y.length===0?"There are no scheduled sessions.":"Try adjusting your search or filters."}),t.jsxs(L,{variant:"outline",className:"mt-4",onClick:()=>m(!0),children:[t.jsx(xe,{className:"w-4 h-4 mr-2"}),"Add Session"]})]})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx(A,{className:"bg-gradient-card border-0 shadow-card hover:shadow-md transition-shadow",children:t.jsxs(O,{className:"p-6 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-education-navy",children:y.length}),t.jsx("div",{className:"text-sm text-muted-foreground",children:y.length===1?"Total Session":"Total Sessions"})]})}),t.jsx(A,{className:"bg-gradient-card border-0 shadow-card hover:shadow-md transition-shadow",children:t.jsxs(O,{className:"p-6 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-primary",children:y.filter(e=>e.type==="class").length}),t.jsx("div",{className:"text-sm text-muted-foreground",children:y.filter(e=>e.type==="class").length===1?"Class":"Total Classes"})]})}),t.jsx(A,{className:"bg-gradient-card border-0 shadow-card hover:shadow-md transition-shadow",children:t.jsxs(O,{className:"p-6 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-accent",children:y.filter(e=>e.type==="event").length}),t.jsx("div",{className:"text-sm text-muted-foreground",children:y.filter(e=>e.type==="event").length===1?"Event":"Total Events"})]})}),t.jsx(A,{className:"bg-gradient-card border-0 shadow-card hover:shadow-md transition-shadow",children:t.jsxs(O,{className:"p-6 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-education-green",children:y.filter(e=>e.type==="other").length}),t.jsx("div",{className:"text-sm text-muted-foreground",children:y.filter(e=>e.type==="other").length===1?"Activity":"Total Activities"})]})})]})]})]})};export{ut as default};
